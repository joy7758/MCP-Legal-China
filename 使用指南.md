# MCP-Legal-China ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡å™¨

```bash
cd /Users/ming/.gemini/antigravity/MCP-Legal-China
source venv/bin/activate
python server.py
```

å¯åŠ¨åä¼šçœ‹åˆ°:
```
ğŸš€ Legal-CN-Server v0.2.0 æ­£åœ¨å¯åŠ¨...
ğŸ“‹ æä¾›çš„èƒ½åŠ›:
   - Tools: 3 ä¸ªæ³•å¾‹å·¥å…·
   - Resources: 3 ä¸ªæ³•å¾‹èµ„æº
   - Prompts: 2 ä¸ªå·¥ä½œæµæ¨¡æ¿
âš–ï¸  ç­‰å¾… Claude Cowork è°ƒç”¨...
```

---

## ğŸ› ï¸ å¯ç”¨å·¥å…· (Tools)

### 1. check_contract_risk - åˆåŒé£é™©æ£€æŸ¥

**åŠŸèƒ½**: è‡ªåŠ¨æ£€æµ‹åˆåŒä¸­çš„æ³•å¾‹é£é™©

**å‚æ•°**:
- `contract_text` (å¿…éœ€): åˆåŒæ–‡æœ¬å†…å®¹
- `check_types` (å¯é€‰): æ£€æŸ¥ç±»å‹æ•°ç»„,å¯é€‰å€¼:
  - `jurisdiction` - ç®¡è¾–æƒæ£€æŸ¥
  - `penalty` - è¿çº¦é‡‘æ£€æŸ¥
  - `liability` - è´£ä»»æ¡æ¬¾æ£€æŸ¥

**ç¤ºä¾‹**:
```python
{
  "contract_text": "ç”²ä¹™åŒæ–¹çº¦å®š,äº‰è®®æäº¤çº½çº¦ä»²è£...",
  "check_types": ["jurisdiction", "penalty"]
}
```

**è¿”å›**:
```json
{
  "status": "å‘ç°é£é™©",
  "risk_count": 2,
  "risks": [
    {
      "type": "jurisdiction",
      "level": "é«˜é£é™©",
      "description": "æ£€æµ‹åˆ°éä¸­å›½å¢ƒå†…ç®¡è¾–æƒæ¡æ¬¾",
      "suggestion": "å»ºè®®ä¿®æ”¹ä¸º: åŒ—äº¬ä»²è£å§”å‘˜ä¼šæˆ–ä¸Šæµ·ä»²è£å§”å‘˜ä¼š"
    }
  ]
}
```

---

### 2. analyze_legal_clause - æ³•å¾‹æ¡æ¬¾åˆ†æ

**åŠŸèƒ½**: åˆ†æç‰¹å®šæ¡æ¬¾çš„åˆè§„æ€§

**å‚æ•°**:
- `clause_text` (å¿…éœ€): æ¡æ¬¾æ–‡æœ¬
- `clause_type` (å¿…éœ€): æ¡æ¬¾ç±»å‹
  - `penalty` - è¿çº¦é‡‘
  - `liability` - è´£ä»»
  - `termination` - ç»ˆæ­¢
  - `jurisdiction` - ç®¡è¾–æƒ

**ç¤ºä¾‹**:
```python
{
  "clause_text": "è¿çº¦æ–¹åº”æ”¯ä»˜åˆåŒæ€»ä»·20%çš„è¿çº¦é‡‘",
  "clause_type": "penalty"
}
```

**è¿”å›**:
```json
{
  "clause_type": "penalty",
  "compliance_status": "åŸºæœ¬åˆè§„",
  "legal_basis": [
    "ã€Šæ°‘æ³•å…¸ã€‹ç¬¬585æ¡ - è¿çº¦é‡‘æ¡æ¬¾"
  ],
  "suggestions": [
    "æ³¨æ„è¿çº¦é‡‘æ¯”ä¾‹,é¿å…è¢«è®¤å®šä¸ºè¿‡é«˜"
  ]
}
```

---

### 3. get_legal_suggestion - è·å–æ³•å¾‹å»ºè®®

**åŠŸèƒ½**: æ ¹æ®é£é™©ç±»å‹è·å–ä¸“ä¸šå»ºè®®

**å‚æ•°**:
- `risk_type` (å¿…éœ€): é£é™©ç±»å‹
  - `jurisdiction` - ç®¡è¾–æƒ
  - `penalty` - è¿çº¦é‡‘
  - `liability` - è´£ä»»
  - `general` - é€šç”¨
- `context` (å¯é€‰): å…·ä½“æƒ…å†µæè¿°

**ç¤ºä¾‹**:
```python
{
  "risk_type": "jurisdiction",
  "context": "æ¶‰åŠè·¨å¢ƒç”µå•†ä¸šåŠ¡"
}
```

**è¿”å›**:
```json
{
  "title": "ç®¡è¾–æƒæ¡æ¬¾å»ºè®®",
  "recommendations": [
    "ä¼˜å…ˆé€‰æ‹©ä»²è£æ–¹å¼è§£å†³äº‰è®®,æ•ˆç‡æ›´é«˜",
    "å»ºè®®é€‰æ‹©: åŒ—äº¬ä»²è£å§”å‘˜ä¼šã€ä¸Šæµ·ä»²è£å§”å‘˜ä¼š"
  ],
  "template": "å› æœ¬åˆåŒå¼•èµ·çš„äº‰è®®,æäº¤åŒ—äº¬ä»²è£å§”å‘˜ä¼šä»²è£..."
}
```

---

## ğŸ“š å¯ç”¨èµ„æº (Resources)

### 1. legal://civil-code/contract
ã€Šæ°‘æ³•å…¸ã€‹åˆåŒç¼–ç›¸å…³æ¡æ–‡

### 2. legal://templates/contract-checklist
æ ‡å‡†åˆåŒå®¡æŸ¥æ¸…å•

### 3. legal://rules/penalty-assessment
è¿çº¦é‡‘è¯„ä¼°è§„åˆ™å’Œæ ‡å‡†

---

## ğŸ’¡ å¯ç”¨æç¤ºè¯ (Prompts)

### 1. contract_review_flow - åˆåŒå®¡æŸ¥æµç¨‹

**å‚æ•°**:
- `contract_type` (å¯é€‰): åˆåŒç±»å‹ (å¦‚"ä¹°å–åˆåŒ")

**ç”¨é€”**: ç”Ÿæˆæ ‡å‡†åŒ–çš„åˆåŒå®¡æŸ¥å·¥ä½œæµç¨‹

---

### 2. risk_assessment_template - é£é™©è¯„ä¼°æ¨¡æ¿

**å‚æ•°**:
- `company_name` (å¿…éœ€): å…¬å¸åç§°

**ç”¨é€”**: ç”Ÿæˆä¼ä¸šé£é™©è¯„ä¼°æŠ¥å‘Šæ¨¡æ¿

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```bash
# æœåŠ¡å™¨é…ç½®
MCP_SERVER_NAME=Legal-CN-Server
MCP_SERVER_VERSION=0.2.0

# è°ƒè¯•æ¨¡å¼
DEBUG=true

# å¤©çœ¼æŸ¥ API (å¯é€‰,ç”¨äº Issue #2)
TIANYANCHA_API_KEY=your_api_key_here

# API é™æµ
API_RATE_LIMIT=10        # æ¯åˆ†é’Ÿæœ€å¤§è°ƒç”¨æ¬¡æ•°
API_RATE_PERIOD=60       # æ—¶é—´çª—å£(ç§’)

# è¿çº¦é‡‘é˜ˆå€¼
PENALTY_THRESHOLD=0.3    # 30%
```

---

## ğŸ“– ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: åˆåŒåˆæ­¥å®¡æŸ¥

```python
# 1. ä½¿ç”¨ check_contract_risk è¿›è¡Œå¿«é€Ÿæ‰«æ
result = check_contract_risk({
    "contract_text": "...",
    "check_types": ["jurisdiction", "penalty", "liability"]
})

# 2. å¦‚æœå‘ç°é£é™©,ä½¿ç”¨ analyze_legal_clause æ·±å…¥åˆ†æ
analysis = analyze_legal_clause({
    "clause_text": "...",
    "clause_type": "penalty"
})

# 3. è·å–ä¿®æ”¹å»ºè®®
suggestion = get_legal_suggestion({
    "risk_type": "penalty"
})
```

---

### åœºæ™¯ 2: ä½¿ç”¨å·¥ä½œæµæ¨¡æ¿

```python
# 1. è·å–åˆåŒå®¡æŸ¥æµç¨‹
prompt = get_prompt("contract_review_flow", {
    "contract_type": "æœåŠ¡åˆåŒ"
})

# 2. æŒ‰ç…§æµç¨‹é€æ­¥å®¡æŸ¥
# 3. å‚è€ƒ Resources ä¸­çš„æ³•å¾‹æ¡æ–‡
```

---

## ğŸ§ª æµ‹è¯•

è¿è¡Œå®Œæ•´æµ‹è¯•:
```bash
python test_server.py
```

æµ‹è¯•ç‰¹å®šåŠŸèƒ½:
```python
import asyncio
from server import LegalCNServer

async def test():
    server = LegalCNServer()
    result = await server._check_contract_risk({
        "contract_text": "ä½ çš„åˆåŒæ–‡æœ¬"
    })
    print(result[0].text)

asyncio.run(test())
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: æœåŠ¡å™¨å¯åŠ¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version  # éœ€è¦ 3.10+
```

---

### é—®é¢˜ 2: é…ç½®åŠ è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# éªŒè¯é…ç½®
python -c "from config import Config; print(Config.get_config_dict())"
```

---

## ğŸ“ è·å–å¸®åŠ©

- **GitHub Issues**: https://github.com/joy7758/MCP-Legal-China/issues
- **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹ `æŠ€æœ¯å‚è€ƒèµ„æ–™.md`
- **æµ‹è¯•ç¤ºä¾‹**: æŸ¥çœ‹ `test_server.py`

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **ç†Ÿæ‚‰å·¥å…·**: è¿è¡Œ `test_server.py` æŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½
2. **å®é™…ä½¿ç”¨**: åœ¨ Claude Desktop ä¸­é…ç½®å¹¶ä½¿ç”¨
3. **è´¡çŒ®ä»£ç **: å®ç° Issue #1 æˆ– #2
4. **å®Œå–„æ–‡æ¡£**: æ·»åŠ æ›´å¤šä½¿ç”¨ç¤ºä¾‹

---

*æœ€åæ›´æ–°: 2026-02-05*
